% Method for class 'TimeSignal' and subclasses.
% For scalar TimeSignal only
% epochingFromEvents : separate a Signal into a set of Signals from events, times,
% etc...
% INPUTS
    % minTime : time to begin the trial
    % maxTime : time to end to trial
% OUTPUT
    % epochedSignal : epoched 'TimeSignal' object

    
    
function epochedSignal = epochingFromEvents(self, eventname,varargin)

% make self a column
self = self(:);
for ii = 1:numel(self)
    self(ii).Events = self(ii).Events.sortByTime;
end

% epoch
epochedSignal = self.empty;
for ii = 1:numel(self)
    % get times of start and finish
    ev = self(ii).Events;
    indEvent1 = find(strcmpi({ev.EventName},eventname1));
    if length(delay1) > 1
        times1 = [ev(indEvent1).Time] + delay1(1);
        times2 = [ev(indEvent1).Time] + delay1(2);
    else
        times1 = [ev(indEvent1).Time] + delay1;
        if ischar(varargin{1})
            if strcmpi(varargin{1}, 'next') % to next same trigger
                indEvent2 = indEvent1(2:end);
                
    
   epochedSignal(end+1)
end

% history
epochedSignal.History{end+1,1} = datestr(clock);
epochedSignal.History{end,2} = ...
        'Epoch the Signal';

end
